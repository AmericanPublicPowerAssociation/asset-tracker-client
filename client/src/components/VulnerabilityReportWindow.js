import React, { PureComponent } from 'react'
import { withStyles } from '@material-ui/core/styles'
import Table from '@material-ui/core/Table'
import TableBody from '@material-ui/core/TableBody'
import TableHead from '@material-ui/core/TableHead'
import TableRow from '@material-ui/core/TableRow'
import TableCell from '@material-ui/core/TableCell'
import Typography from '@material-ui/core/Typography'
import { ASSET_TYPE_BY_ID } from '../constants'

const styles = () => ({
	root: {
    height: '100%',
	},
  hover: {
    cursor: 'pointer',
  },
})

class VulnerabilityReportWindow extends PureComponent {
  render() {
    const {
      classes,
      visibleAssets,
      focusingAssetId,
      setFocusingAsset,
    } = this.props
    return (
      <div className={classes.root}>
        <Typography variant='h6' align='center'>Vulnerability Report</Typography>
        <Table>
          <TableHead>
            <TableRow>
              <TableCell>Asset Name</TableCell>
              <TableCell align='right'>Asset Type</TableCell>
            </TableRow>
          </TableHead>
          <TableBody>
          {visibleAssets.filter(
            asset => asset.get('productName', '').includes('3620')
          ).map(asset => {
            const assetId = asset.get('id')
            const assetName = asset.get('name')
            const assetTypeId = asset.get('typeId')
            return (
              <TableRow
                hover
                selected={assetId === focusingAssetId}
                classes={{
                  hover: classes.hover,
                }}
                onClick={() => {
                  setFocusingAsset({id: assetId})
                }}
                key={assetId}
              >
                <TableCell component='th' scope='row'>
                  {assetName}
                </TableCell>
                <TableCell align='right'>
                  {ASSET_TYPE_BY_ID[assetTypeId].name}
                </TableCell>
              </TableRow>
            )
          })}
          </TableBody>
        </Table>
      </div>
    )
  }
}

export default withStyles(styles)(VulnerabilityReportWindow)
